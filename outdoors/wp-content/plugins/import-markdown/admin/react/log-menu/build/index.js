(()=>{"use strict";var e={338:(e,t,a)=>{var n=a(795);t.H=n.createRoot,n.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};const a=window.React;var n=function a(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,a),i.exports}(338);const r=wp.element.useMemo,i="...",l=(e,t)=>{let a=t-e+1;return Array.from({length:a},((t,a)=>a+e))};var o;function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s.apply(null,arguments)}var m,c=function(e){return a.createElement("svg",s({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=a.createElement("path",{d:"m18 17-5-5 5-5m-7 10-5-5 5-5",stroke:"#000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d.apply(null,arguments)}var g,u=function(e){return a.createElement("svg",d({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),m||(m=a.createElement("path",{d:"m15 18-6-6 6-6",stroke:"#0783BE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},p.apply(null,arguments)}var h,E=function(e){return a.createElement("svg",p({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),g||(g=a.createElement("path",{d:"m9 18 6-6-6-6",stroke:"#0783BE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},v.apply(null,arguments)}var b=function(e){return a.createElement("svg",v({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),h||(h=a.createElement("path",{d:"m6 17 5-5-5-5m7 10 5-5-5-5",stroke:"#000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};const _=e=>{const{onPageChange:t,totalCount:n,siblingCount:o=1,currentPage:s,pageSize:m}=e,d=(({totalCount:e,pageSize:t,siblingCount:a=1,currentPage:n})=>r((()=>{const r=Math.ceil(e/t);if(a+5>=r)return l(1,r);const o=Math.max(n-a,1),s=Math.min(n+a,r),m=o>2,c=s<r-2,d=r;if(!m&&c)return[...l(1,3+2*a),i,r];if(m&&!c){let e=l(r-(3+2*a)+1,r);return[1,i,...e]}if(m&&c){let e=l(o,s);return[1,i,...e,i,d]}}),[e,t,a,n]))({currentPage:s,totalCount:n,siblingCount:o,pageSize:m});if(0===s||d.length<2)return null;let g=d[d.length-1];return(0,a.createElement)("ul",{className:"pagination-container"},(0,a.createElement)("li",{className:"pagination-item "+(1===s?"disabled":""),onClick:()=>{t(1)},key:-2},(0,a.createElement)(c,null)),(0,a.createElement)("li",{className:"pagination-item "+(1===s?"disabled":""),onClick:()=>{1!==s&&t(s-1)},key:-1},(0,a.createElement)(u,null)),d.map((e=>e===i?(0,a.createElement)("li",{className:"pagination-item dots",key:crypto.randomUUID()},"â€¦"):(0,a.createElement)("li",{key:e,className:"pagination-item "+(e===s?"selected":""),onClick:()=>t(e)},e))),(0,a.createElement)("li",{className:"pagination-item "+(s===g?"disabled":""),onClick:()=>{s!==g&&t(s+1)},key:g+1},(0,a.createElement)(E,null)),(0,a.createElement)("li",{className:"pagination-item "+(s===g?"disabled":""),onClick:()=>{t(g)},key:g+2},(0,a.createElement)(b,null)))},k=wp.element.useState,w=wp.element.useMemo,{__}=wp.i18n,N=e=>{const[t,n]=k(1),r=w((()=>{const a=10*(t-1),n=a+10;return e.data.slice(a,n)}),[t,e.data]);function i(t){return e.formData.sortingColumn===t?e.formData.sortingOrder:""}return(0,a.createElement)("div",{className:"daimma-data-table-container"},(0,a.createElement)("table",{className:"daimma-react-table__daimma-data-table daimma-react-table__daimma-data-table-dashboard-menu"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",null,(0,a.createElement)("button",{className:"daimma-react-table__daimma-sorting-button",onClick:e.handleSortingChanges,value:"log_id","data-icon":i("log_id")},__("ID","import-markdown"))),(0,a.createElement)("th",null,(0,a.createElement)("button",{className:"daimma-react-table__daimma-sorting-button",onClick:e.handleSortingChanges,value:"date","data-icon":i("date")},__("Date","import-markdown"))),(0,a.createElement)("th",null,(0,a.createElement)("button",{className:"daimma-react-table__daimma-sorting-button",onClick:e.handleSortingChanges,value:"post_title","data-icon":i("post_title")},__("Post","import-markdown"))),(0,a.createElement)("th",null,(0,a.createElement)("button",{className:"daimma-react-table__daimma-sorting-button",onClick:e.handleSortingChanges,value:"file_name","data-icon":i("file_name")},__("File Name","import-markdown"))))),(0,a.createElement)("tbody",null,r.map((e=>(0,a.createElement)("tr",{key:e.log_id},(0,a.createElement)("td",null,e.log_id),(0,a.createElement)("td",null,e.formatted_date),(0,a.createElement)("td",null,(0,a.createElement)("div",{className:"daimma-react-table__post-cell-container"},(0,a.createElement)("a",{href:e.post_permalink},e.post_title),(0,a.createElement)("a",{href:e.post_permalink,target:"_blank",className:"daimma-react-table__icon-link"}),(0,a.createElement)("a",{href:e.post_edit_link,className:"daimma-react-table__icon-link"}))),(0,a.createElement)("td",null,e.file_name)))))),0===e.data.length&&(0,a.createElement)("div",{className:"daimma-no-data-found"},__("We couldn't find any results matching your filters. Try adjusting your criteria.","import-markdown")),e.data.length>0&&(0,a.createElement)("div",{className:"daimma-react-table__pagination-container"},(0,a.createElement)("div",{className:"daext-displaying-num"},e.data.length+" items"),(0,a.createElement)(_,{className:"pagination-bar",currentPage:t,totalCount:e.data.length,pageSize:10,onPageChange:e=>n(e)})))},f=e=>(0,a.createElement)("div",{className:"loading-screen"},(0,a.createElement)("div",{className:"loading-screen__wrapper"},(0,a.createElement)("div",{className:"loading-screen__content"},(0,a.createElement)("div",{className:"loading-screen__spinner-container"},(0,a.createElement)("div",{className:"loading-screen__spinner"})),(0,a.createElement)("div",{className:"loading-screen__text"},void 0!==e.dataUpdateRequired&&e.dataUpdateRequired?e.generatingDataMessage:e.loadingDataMessage)))),y=wp.element.useState,C=wp.element.useEffect,{__:I}=wp.i18n,{render:D}=wp.element,M=document.getElementById("react-root"),j=(0,a.createElement)((()=>{const[e,t]=y({optimizationStatus:0,searchString:"",searchStringChanged:!1,sortingColumn:"log_id",sortingOrder:"desc"}),[n,r]=y(!0),[i,l]=y(!1),[o,s]=y([]),[m,c]=y({allRecords:0});return C((()=>{r(!0),wp.apiFetch({path:"/daext-import-markdown/v1/log",method:"POST",data:{search_string:e.searchString,sorting_column:e.sortingColumn,sorting_order:e.sortingOrder,data_update_required:i}}).then((e=>{s(e.table),c({allRecords:e.statistics.all_records}),i&&(l(!1),t({searchString:"",searchStringChanged:!1,sortingColumn:"log_id",sortingOrder:"desc"})),r(!1)}))}),[e.searchStringChanged,e.sortingColumn,e.sortingOrder,i]),(0,a.createElement)(a.Fragment,null,(0,a.createElement)(React.StrictMode,null,n?(0,a.createElement)(f,{loadingDataMessage:I("Loading data...","import-markdown"),generatingDataMessage:I("Data is being generated. For large sites, this process may take several minutes. Please wait...","import-markdown"),dataUpdateRequired:i}):(0,a.createElement)("div",{className:"daimma-admin-body"},(0,a.createElement)("div",{className:"daimma-react-table"},(0,a.createElement)("div",{className:"daimma-react-table-header"},(0,a.createElement)("div",{className:"statistics"},(0,a.createElement)("div",{className:"statistic-label"},I("All records","import-markdown"),":"),(0,a.createElement)("div",{className:"statistic-value"},m.allRecords)),(0,a.createElement)("div",{className:"tools-actions"},(0,a.createElement)("button",{onClick:e=>{l((e=>!e))}},(0,a.createElement)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIyIDEwQzIyIDEwIDE5Ljk5NSA3LjI2ODIyIDE4LjM2NjIgNS42MzgyNEMxNi43MzczIDQuMDA4MjcgMTQuNDg2NCAzIDEyIDNDNy4wMjk0NCAzIDMgNy4wMjk0NCAzIDEyQzMgMTYuOTcwNiA3LjAyOTQ0IDIxIDEyIDIxQzE2LjEwMzEgMjEgMTkuNTY0OSAxOC4yNTQzIDIwLjY0ODIgMTQuNU0yMiAxMFY0TTIyIDEwSDE2IiBzdHJva2U9IiM0NzU0NjciIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=",className:"button-icon"}),I("Update metrics","import-markdown")))),(0,a.createElement)("div",{className:"daimma-react-table__daimma-filters daimma-react-table__daimma-filters-dashboard-menu"},(0,a.createElement)("div",{className:"daimma-search-container"},(0,a.createElement)("input",{onKeyUp:function(e){"Enter"===e.key&&(e.preventDefault(),document.getElementById("daimma-search-button").click())},type:"text",placeholder:I("Filter by title","import-markdown"),value:e.searchString,onChange:a=>t({...e,searchString:a.target.value})}),(0,a.createElement)("input",{id:"daimma-search-button",className:"daimma-btn daimma-btn-secondary",type:"submit",value:I("Search","import-markdown"),onClick:()=>t({...e,searchStringChanged:!e.searchStringChanged})}))),(0,a.createElement)(N,{data:o,handleSortingChanges:function(a){let n=e.sortingOrder;e.sortingColumn===a.target.value&&(n="asc"===e.sortingOrder?"desc":"asc"),t({...e,sortingColumn:a.target.value,sortingOrder:n})},formData:e})))))}),null);M&&(n.H?(0,n.H)(M).render(j):D(j,M))})();